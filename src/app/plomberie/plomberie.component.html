<!-- Barre de Navigation (Header) -->
<header class="bg-white shadow-md sticky top-0 z-10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
    <h1 class="text-3xl font-bold text-indigo-600"><a routerLink="/">WorkingExpress</a></h1>
    <div id="auth-status" class="text-sm text-gray-600">Chargement de l'utilisateur...</div>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

  <!-- Contenu Principal : Vue Liste -->
  <section id="list-view">
    <section class="mb-10 text-center md:text-left">
      <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-2">
        Plomberie <span class="text-indigo-600">üõ†Ô∏è</span>
      </h2>
      <p class="text-xl text-gray-500">Trouvez un plombier qualifi√© disponible pr√®s de chez vous.</p>
    </section>

    <!-- Barre de Filtres -->
    <form id="filter-form" class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-gray-100">
      <h3 class="text-xl font-bold text-gray-800 mb-4">Affiner votre recherche</h3>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <input type="text" id="filter-location" placeholder="Ville ou code postal"
               class="p-3 border border-gray-300 rounded-lg">

        <select id="filter-service"
                class="p-3 border border-gray-300 rounded-lg appearance-none">
          <option value="all">Tous les services</option>
          <option value="fuite">Fuite d'eau urgente</option>
          <option value="installation">Installation robinetterie</option>
          <option value="debouchage">D√©bouchage canalisation</option>
        </select>

        <div class="flex items-center space-x-2 p-3 bg-gray-50 rounded-lg">
          <input type="checkbox" id="filter-urgent" class="w-4 h-4 text-indigo-600">
          <label for="filter-urgent" class="text-gray-700">Disponible maintenant</label>
        </div>

        <button type="submit" id="apply-filters-btn"
                class="px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg">
          Appliquer les filtres
        </button>
      </div>
    </form>

    <!-- Liste Plombiers -->
    <section>
      <h3 id="results-count" class="text-2xl font-bold text-gray-800 mb-6">
        3 Plombiers trouv√©s dans votre r√©gion
      </h3>

      <div id="plumbers-list" class="space-y-6">

        <!-- *** Plombier 1 *** -->
        <div class="plumber-card bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500"
             data-id="1" data-service="fuite,installation,debouchage"
             data-availability="now" data-location="dakar/rufisque">

          <div class="flex items-center space-x-4">
            <a href="#" (click)="showPlumberDetails('1'); $event.preventDefault()">
              <img src="https://placehold.co/80x80/059669/ffffff?text=L1"
                   class="w-16 h-16 rounded-full border-2 border-green-500">
            </a>

            <div>
              <a href="#" (click)="showPlumberDetails('1'); $event.preventDefault()"
                 class="text-xl font-bold text-gray-900 hover:text-indigo-600">
                Louis M.
              </a>
              <p class="text-gray-600">Expert en d√©tection de fuites | 12 ans d'exp√©rience</p>
            </div>
          </div>

          <div class="flex flex-col items-start md:items-end space-y-2">
            <div class="availability-status text-green-700 bg-green-100 px-3 py-1 rounded-full">
              Disponible Maintenant
            </div>

            <p class="text-2xl font-bold text-indigo-600">10 000 XOF / heure</p>

            <a href="#" (click)="showPlumberDetails('1'); $event.preventDefault()"
               class="px-5 py-2 bg-indigo-600 text-white rounded-lg">
              Voir le service
            </a>
          </div>
        </div>

        <!-- *** Plombier 2 *** -->
        <div class="plumber-card bg-white p-6 rounded-xl shadow-lg border-l-4 border-orange-500"
             data-id="2" data-service="debouchage,installation" data-availability="soon">

          <div class="flex items-center space-x-4">
            <a href="#" (click)="showPlumberDetails('2'); $event.preventDefault()">
              <img src="https://placehold.co/80x80/f97316/ffffff?text=M2"
                   class="w-16 h-16 rounded-full border-2 border-orange-500">
            </a>

            <div>
              <a href="#" (click)="showPlumberDetails('2'); $event.preventDefault()"
                 class="text-xl font-bold hover:text-indigo-600">
                Marion T.
              </a>
              <p class="text-gray-600">Plombi√®re certifi√©e RGE | 5 ans d'exp√©rience</p>
            </div>
          </div>

          <div class="flex flex-col items-start md:items-end space-y-2">
            <div class="availability-status text-orange-700 bg-orange-100 px-3 py-1 rounded-full">
              Prochain cr√©neau : Demain 8h00
            </div>
            <p class="text-2xl font-bold text-indigo-600">15 000 XOF / forfait</p>

            <a href="#" (click)="showPlumberDetails('2'); $event.preventDefault()"
               class="px-5 py-2 bg-indigo-600 text-white rounded-lg">
              Voir le service
            </a>
          </div>
        </div>

        <!-- *** Plombier 3 *** -->
        <div class="plumber-card bg-white p-6 rounded-xl shadow-lg border-l-4 border-gray-400"
             data-id="3" data-service="installation" data-availability="booking">

          <div class="flex items-center space-x-4">
            <a href="#" (click)="showPlumberDetails('3'); $event.preventDefault()">
              <img src="https://placehold.co/80x80/9ca3af/ffffff?text=J3"
                   class="w-16 h-16 rounded-full border-2 border-gray-400">
            </a>

            <div>
              <a href="#" (click)="showPlumberDetails('3'); $event.preventDefault()"
                 class="text-xl font-bold hover:text-indigo-600">
                Modou Diaw
              </a>
              <p class="text-gray-600">R√©paration de robinet | 2 ans d'exp√©rience</p>
            </div>
          </div>

          <div class="flex flex-col items-start md:items-end space-y-2">
            <div class="availability-status text-gray-700 bg-gray-100 px-3 py-1 rounded-full">
              Sur r√©servation (3 jours)
            </div>
            <p class="text-2xl font-bold text-indigo-600">Prix sur devis</p>

            <a href="#" (click)="showPlumberDetails('3'); $event.preventDefault()"
               class="px-5 py-2 bg-indigo-600 text-white rounded-lg">
              Voir le service
            </a>
          </div>
        </div>

      </div>

      <div id="no-results"
           class="hidden text-center p-8 bg-yellow-50 rounded-lg border border-yellow-200 mt-6">
        <p class="text-xl text-yellow-800 font-semibold">
          Aucun plombier ne correspond √† vos crit√®res.
        </p>
      </div>
    </section>
  </section>

  <!-- Vue D√©tail -->
  <section id="detail-view" class="hidden">
    <button (click)="showListView()"
            class="mb-6 inline-flex items-center text-indigo-600 hover:text-indigo-800">
      Retour √† la liste
    </button>

    <div id="plumber-details-container"
         class="bg-white p-8 rounded-xl shadow-2xl border border-gray-100">
      <h1>uytttttt</h1>
    </div>
  </section>

</main>

<!-- Modale R√©servation -->
<div id="reservation-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <h2 class="text-2xl font-bold text-indigo-600 mb-4">Finaliser la R√©servation</h2>

    <form id="reservation-form">
      <div class="flex justify-end space-x-3">
        <button type="button" (click)="closeReservationModal()"
                class="px-5 py-2 border border-gray-300 rounded-lg">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modale Paiement -->
<div id="payment-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <h2 id="payment-title" class="text-2xl font-bold text-indigo-600 mb-4">Paiement</h2>

    <form id="payment-form">
      <div class="mt-6 flex justify-end space-x-3">
        <button type="button" (click)="closePaymentModal()"
                class="px-5 py-2 border border-gray-300 rounded-lg">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modale Message -->
<div id="message-modal" class="modal-overlay hidden message-modal">
  <div class="modal-content">
    <div id="message-content"></div>

    <button (click)="closeMessageModal()"
            class="mt-4 px-5 py-2 bg-indigo-600 text-white rounded-lg">
      OK
    </button>
  </div>
</div>
